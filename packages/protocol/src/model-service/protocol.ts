/********************************************************************************
 * Copyright (c) 2023 CrossBreeze.
 ********************************************************************************/
import * as rpc from 'vscode-jsonrpc/node';

/**
 * Serialized version of the semantic model generated by Langium.
 */

export interface CrossModelRoot {
   readonly $type: 'CrossModelRoot';
   entity?: Entity;
   relationship?: Relationship;
}

export interface Relationship {
   readonly $type: 'Relationship';
   name: string;
   properties: Array<Property>;
   source: string;
   target: string;
   type: '1:1' | '1:n' | 'n:1' | 'n:m';
}

export interface Property {
   readonly $type: 'Property';
   key: string;
   value: number | string;
}

export interface Entity {
   readonly $type: 'Entity';
   name: string;
   description: string;
   attributes: Array<Attribute>;
}

export interface Attribute {
   readonly $type: 'Attribute';
   name: string;
   value: number | string;
}

export const OpenModel = new rpc.RequestType1<string, void, void>('server/open');
export const CloseModel = new rpc.RequestType1<string, void, void>('server/close');
export const RequestModel = new rpc.RequestType1<string, CrossModelRoot | undefined, void>('server/request');
export const UpdateModel = new rpc.RequestType2<string, CrossModelRoot, void, void>('server/update');
export const SaveModel = new rpc.RequestType2<string, CrossModelRoot, void, void>('server/save');
