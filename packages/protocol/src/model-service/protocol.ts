/********************************************************************************
 * Copyright (c) 2023 CrossBreeze.
 ********************************************************************************/
import * as rpc from 'vscode-jsonrpc/node';

/**
 * Serialized version of the semantic model generated by Langium.
 */

export interface CrossModelRoot {
    readonly $type: 'CrossModelRoot';
    entity?: Entity;
    relationship?: Relationship;
}

export interface Entity {
    readonly $container: CrossModelRoot;
    readonly $type: 'Entity';
    attributes: Array<EntityAttribute>;
    description?: string;
    name?: string;
    name_val?: string;
}

export interface EntityAttribute {
    readonly $container: Entity;
    readonly $type: 'EntityAttribute';
    datatype?: string;
    description?: string;
    name?: string;
    name_val?: string;
}

export interface Relationship {
    readonly $container: CrossModelRoot;
    readonly $type: 'Relationship';
    child?: string;
    description?: string;
    name?: string;
    name_val?: string;
    parent?: string;
    type?: RelationshipType;
}

export type RelationshipType = '1:1' | '1:n' | 'n:1' | 'n:m';

export const OpenModel = new rpc.RequestType1<string, void, void>('server/open');
export const CloseModel = new rpc.RequestType1<string, void, void>('server/close');
export const RequestModel = new rpc.RequestType1<string, CrossModelRoot | undefined, void>('server/request');
export const UpdateModel = new rpc.RequestType2<string, CrossModelRoot, void, void>('server/update');
export const SaveModel = new rpc.RequestType2<string, CrossModelRoot, void, void>('server/save');
export const OnSave = new rpc.NotificationType2<string, CrossModelRoot>('server/onSave');
